"use strict";function $(a){return document.getElementById(a)}function $c(a){return document.getElementsByClassName(a)}function firstTag(a){return document.getElementsByTagName(a)[0]}function clearElement(a){var b=a.cloneNode(!1);return a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),b}function generateTextElement(a,b){var c=document.createElement(a),d=document.createTextNode(b);return c.appendChild(d),c}function generatebutton(a,b,c){var d=document.createElement("div");return d.id=b,d.addEventListener("click",a,!1),d.appendChild(generateTextElement("h1",c)),d}function buildOption(a){var b=document.createElement("Option"),c=document.createTextNode(a);return b.value=a,b.appendChild(c),b}function generateInput(a,b,c){var d=document.createElement("input");return d.type=a,d.name=b,d.setAttribute("class",c),d}function generateTable(a){var b=document.createElement("table"),c=b.insertRow();return b.id="vehiculos",a.forEach(function(a){c.insertCell().appendChild(document.createTextNode(a))}),c.insertCell().appendChild(document.createTextNode("Vender")),b}function removeFirstWhite(){var a=this.firstChild;this.removeChild(a),this.removeEventListener("change",removeFirstWhite,!1)}function buildSelect(a,b,c,d){var e=document.createElement("select");return e.id=a,e.appendChild(buildOption(c)),b.map(buildOption).forEach(function(a){e.appendChild(a)}),e.addEventListener("change",d,!1),e}function makeTable(){var a=firstTag("article");a=clearElement(a),a.appendChild(generateTable(globals.CAR_ATTRIBUTES_PRINT))}function fillTable(a){var b,c,d=$("vehiculos");a.forEach(function(a){c=d.insertRow(),a.getAllPropierties().forEach(function(a){c.insertCell().appendChild(document.createTextNode(a))}),b=generateInput("checkbox",a.numberPlate,"sold"),c.insertCell().appendChild(b)})}function printSelectedCar(){var a=dealernet.getDealerShip($("menu").value),b=a.getFilterCar($("select_car").value);makeTable(),fillTable(b)}function generateChooseCar(){var a=firstTag("nav"),b=globals.MODELS,c=buildSelect("select_car",b,"Todos",printSelectedCar);a.appendChild(generateTextElement("h3","Filtrar por modelo")),a.appendChild(c)}function generateErrorMessage(a){var b=generateTextElement("h4",a);return b.id="error_insert",b}function buyButton(){var a,b=$c("datos_compra"),c=firstTag("nav"),d=dealernet.getDealerShip($("menu").value),e=globals.CAR_ATTRIBUTES.map(function(b,c){return a=this[c].value,this[c].value="",a},b);d.checkData(e)&&!dealernet.hasNumberPlate(e[1])?(d.buyCar(globals.CAR_ATTRIBUTES,e),c.replaceChild(generateErrorMessage(""),$("error_insert")),makeTable(),fillTable(d.cars)):c.replaceChild(generateErrorMessage("Datos incorrectos"),$("error_insert"))}function generateFormBuy(){var a=firstTag("nav");a=clearElement(a),globals.CAR_ATTRIBUTES_PRINT.forEach(function(b){a.appendChild(generateTextElement("label",b)),a.appendChild(generateInput("text",b,"datos_compra"))}),a.appendChild(generatebutton(buyButton,"comprar","Comprar")),generateChooseCar(),a.insertBefore(generateErrorMessage(""),firstTag("label"))}function calculateAllProfits(){var a=firstTag("section").firstChild,b=dealernet.getDealerShip($("menu").value);a.textContent="Beneficios: "+b.sellProfitsAll()+" â‚¬",$("select_car").item(0).selected=!0,makeTable(globals.CAR_ATTRIBUTES_PRINT),fillTable(b.cars)}function getSelectedCars(){var a=dealernet.getDealerShip($("menu").value),b=document.getElementsByClassName("sold"),c=a.getFilterCar($("select_car").value);return c.filter(function(a,b){return this[b].checked===!0},b)}function calculateProfitsSell(){var a=getSelectedCars(),b=firstTag("section").firstChild,c=dealernet.getDealerShip($("menu").value);b.textContent="Beneficios: 0",c.sellCars(a),$("select_car").item(0).selected=!0,makeTable(globals.CAR_ATTRIBUTES_PRINT),fillTable(c.cars)}function generateProfits(){var a=firstTag("section"),b=generatebutton(calculateProfitsSell,"venderAll","Vender"),c=generatebutton(calculateAllProfits,"vender","Beneficios");a=clearElement(a),a.appendChild(generateTextElement("h2","Beneficios : 0")),a.appendChild(b),a.appendChild(c)}function generatePage(){var a=dealernet.getDealerShip($("menu").value),b=firstTag("header"),c=generateTextElement("h1","Bienvenido a "+$("menu").value);b.replaceChild(c,b.lastChild),generateFormBuy(),makeTable(),fillTable(a.cars),generateProfits()}function startAplication(){var a=firstTag("header");a.appendChild(buildSelect("menu",globals.ZONE,"",generatePage)),$("menu").addEventListener("change",removeFirstWhite,!1),a.appendChild(generateTextElement("h1","Elige un concesionario"))}window.onload=startAplication;